// tslint:disable-next-line:max-line-length
export const worker = `!function(){"use strict";var a=function(a){var b=new ArrayBuffer(a);return{arrayBuffer:b,dataView:new DataView(b)}},b=function(b,c,d){var e=a(14),f=e.arrayBuffer,g=e.dataView;return g.setUint32(0,1297377380),g.setUint32(4,6),g.setUint16(8,c),g.setUint16(10,d.length),g.setUint16(12,b),f},c=function(a){var b=new ArrayBuffer(a);return{arrayBuffer:b,dataView:new DataView(b)}},d=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e=function(a){var b=a.reduce(function(a,b){return a+b.byteLength},0),c=a.reduce(function(a,b){var c=d(a,2),e=c[0],f=c[1];return f.set(new Uint8Array(b),e),[e+b.byteLength,f]},[0,new Uint8Array(b)]);return d(c,2)[1].buffer},f=function(a){for(var b=Math.max(1,Math.floor(Math.log(a)/Math.log(2)/7)+1),d=c(b),e=d.arrayBuffer,f=d.dataView,g=b-1,h=0;h<g;h+=1)f.setUint8(h,a>>7|128),a&=127;return f.setUint8(b-1,a),e},g=function(a){if("channelPrefix"in a){var b=c(4),d=b.arrayBuffer,g=b.dataView;return g.setUint8(0,255),g.setUint8(1,32),g.setUint8(2,1),g.setUint8(3,a.channelPrefix),d}if("controlChange"in a){var h=c(3),i=h.arrayBuffer,j=h.dataView;return j.setUint8(0,176|15&a.channel),j.setUint8(1,a.controlChange.type),j.setUint8(2,a.controlChange.value),i}if("endOfTrack"in a){var k=c(3),l=k.arrayBuffer,m=k.dataView;return m.setUint8(0,255),m.setUint8(1,47),m.setUint8(2,0),l}if("keySignature"in a){var n=c(5),o=n.arrayBuffer,p=n.dataView;return p.setUint8(0,255),p.setUint8(1,89),p.setUint8(2,2),p.setUint8(3,a.keySignature.key),p.setUint8(4,a.keySignature.scale),o}if("midiPort"in a){var q=c(4),r=q.arrayBuffer,s=q.dataView;return s.setUint8(0,255),s.setUint8(1,33),s.setUint8(2,1),s.setUint8(3,a.midiPort),r}if("noteOff"in a){var t=c(3),u=t.arrayBuffer,v=t.dataView;return v.setUint8(0,128|15&a.channel),v.setUint8(1,a.noteOff.noteNumber),v.setUint8(2,a.noteOff.velocity),u}if("noteOn"in a){var w=c(3),x=w.arrayBuffer,y=w.dataView;return y.setUint8(0,144|15&a.channel),y.setUint8(1,a.noteOn.noteNumber),y.setUint8(2,a.noteOn.velocity),x}if("pitchBend"in a){var z=c(3),A=z.arrayBuffer,B=z.dataView;return B.setUint8(0,224|15&a.channel),B.setUint8(1,127&a.pitchBend),B.setUint8(2,a.pitchBend>>7),A}if("programChange"in a){var C=c(2),D=C.arrayBuffer,E=C.dataView;return E.setUint8(0,192|15&a.channel),E.setUint8(1,a.programChange.programNumber),D}if("setTempo"in a){var F=c(6),G=F.arrayBuffer,H=F.dataView;return H.setUint8(0,255),H.setUint8(1,81),H.setUint8(2,3),H.setUint8(3,a.setTempo.microsecondsPerBeat>>16),H.setUint8(4,a.setTempo.microsecondsPerBeat>>8),H.setUint8(5,a.setTempo.microsecondsPerBeat),G}if("smpteOffset"in a){var I=c(8),J=I.arrayBuffer,K=I.dataView,L=void 0;return 24===a.smpteOffset.frameRate?L=0:25===a.smpteOffset.frameRate?L=32:29===a.smpteOffset.frameRate?L=64:30===a.smpteOffset.frameRate&&(L=96),K.setUint8(0,255),K.setUint8(1,84),K.setUint8(2,5),K.setUint8(3,a.smpteOffset.hour|L),K.setUint8(4,a.smpteOffset.minutes),K.setUint8(5,a.smpteOffset.seconds),K.setUint8(6,a.smpteOffset.frame),K.setUint8(7,a.smpteOffset.subFrame),J}if("sysex"in a){var M=c(1),N=M.arrayBuffer;M.dataView.setUint8(0,240);for(var O=a.sysex.length/2,P=f(O),Q=c(O),R=Q.arrayBuffer,S=Q.dataView,T=0;T<a.sysex.length;T+=2)S.setUint8(T/2,parseInt(a.sysex.slice(T,T+2),16));return e([N,P,R])}if("timeSignature"in a){for(var U=c(7),V=U.arrayBuffer,W=U.dataView,X=a.timeSignature.denominator,Y=0;X>1;)X/=2,Y+=1;return W.setUint8(0,255),W.setUint8(1,88),W.setUint8(2,4),W.setUint8(3,a.timeSignature.numerator),W.setUint8(4,Y),W.setUint8(5,a.timeSignature.metronome),W.setUint8(6,a.timeSignature.thirtyseconds),V}if("trackName"in a){var Z=c(2),$=Z.arrayBuffer,_=Z.dataView;_.setUint8(0,255),_.setUint8(1,3);var aa=new TextEncoder,ba=aa.encode(a.trackName).buffer,ca=f(ba.byteLength);return e([$,ca,ba])}throw new Error('Unencodable event with a delta of "'+a.delta+'".')},h=function(a){var b=a.reduce(function(a,b){return a+b.byteLength},0);return a.reduce(function(a,b){var c=a.offset,d=a.uint8Array;return d.set(new Uint8Array(b),c),{offset:c+b.byteLength,uint8Array:d}},{offset:0,uint8Array:new Uint8Array(b)}).uint8Array.buffer},i=function(b){for(var c=Math.max(1,Math.floor(Math.log(b)/Math.log(2)/7)+1),d=a(c),e=d.arrayBuffer,f=d.dataView,g=c-1,h=0;h<g;h+=1)f.setUint8(h,b>>7|128),b&=127;return f.setUint8(c-1,b),e},j=function(b){var c=a(8),d=c.arrayBuffer,e=c.dataView,f=[d],j=0;e.setUint32(0,1297379947);var k=!0,l=!1,m=void 0;try{for(var n,o=b[Symbol.iterator]();!(k=(n=o.next()).done);k=!0){var p=n.value,q=i(p.delta);try{var r=g(p);j+=q.byteLength+r.byteLength,f.push(q,r)}catch(a){if(a.message.match(/Unencodable\\smessage\\swith\\sa\\sdelta\\sof\\s[0-9]+\\./)){var s=b.indexOf(p);throw new Error("Unencodable message at index "+s+".")}throw a}}}catch(a){l=!0,m=a}finally{try{!k&&o.return&&o.return()}finally{if(l)throw m}}return e.setUint32(4,j),h(f)},k=function(a){var c=a.division,d=a.format,e=a.tracks,f=[];try{f.push(b(c,d,e))}catch(a){throw new Error("The given JSON object seems to be invalid.")}var g=!0,i=!1,k=void 0;try{for(var l,m=e[Symbol.iterator]();!(g=(l=m.next()).done);g=!0){var n=l.value;try{f.push(j(n))}catch(a){if(a.message.match(/Unencodable\\sevent\\sat\\sposition\\s[0-9]+\\./)){var o=e.indexOf(n);throw new Error(a.message.slice(0,-1)+" of the track at index "+o+".")}throw a}}}catch(a){i=!0,k=a}finally{try{!g&&m.return&&m.return()}finally{if(i)throw k}}return h(f)};addEventListener("message",function(a){var b=a.data.json;try{postMessage({midiFile:k(b)})}catch(a){postMessage({err:{message:a.message}})}})}();`;

// tslint:disable-next-line:max-line-length
export const worker = `!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){var r=n(1),i=n(2),a=n(3);e.exports=function(e,t){return r(e)||i(e,t)||a()}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){"use strict";n.r(t);const r=e=>{const t=new ArrayBuffer(e);return{arrayBuffer:t,dataView:new DataView(t)}},i=e=>{const t=new ArrayBuffer(e);return{arrayBuffer:t,dataView:new DataView(t)}};var a=n(0),s=n.n(a);const o=(e=>t=>{const n=Math.max(1,Math.floor(Math.log(t)/Math.log(2)/7)+1),r=e(n),i=r.arrayBuffer,a=r.dataView;for(let e=1;e<n;e+=1)a.setUint8(n-1-e,t>>7*e&127|128);return a.setUint8(n-1,127&t),i})(i),f=((e,t,n)=>r=>{if((e=>void 0!==e.channelPrefix)(r)){const t=e(4),n=t.arrayBuffer,i=t.dataView;return i.setUint8(0,255),i.setUint8(1,32),i.setUint8(2,1),i.setUint8(3,r.channelPrefix),n}if((e=>void 0!==e.controlChange)(r)){const t=e(3),n=t.arrayBuffer,i=t.dataView;return i.setUint8(0,176|15&r.channel),i.setUint8(1,r.controlChange.type),i.setUint8(2,r.controlChange.value),n}if((e=>void 0!==e.copyrightNotice)(r)){const i=e(2),a=i.arrayBuffer,s=i.dataView;s.setUint8(0,255),s.setUint8(1,2);const o=(new TextEncoder).encode(r.copyrightNotice).buffer,f=n(o.byteLength);return t([a,f,o])}if((e=>void 0!==e.endOfTrack)(r)){const t=e(3),n=t.arrayBuffer,r=t.dataView;return r.setUint8(0,255),r.setUint8(1,47),r.setUint8(2,0),n}if((e=>void 0!==e.instrumentName)(r)){const i=e(2),a=i.arrayBuffer,s=i.dataView;s.setUint8(0,255),s.setUint8(1,4);const o=(new TextEncoder).encode(r.instrumentName).buffer,f=n(o.byteLength);return t([a,f,o])}if((e=>void 0!==e.keySignature)(r)){const t=e(5),n=t.arrayBuffer,i=t.dataView;return i.setUint8(0,255),i.setUint8(1,89),i.setUint8(2,2),i.setUint8(3,r.keySignature.key),i.setUint8(4,r.keySignature.scale),n}if((e=>void 0!==e.lyric)(r)){const i=e(2),a=i.arrayBuffer,s=i.dataView;s.setUint8(0,255),s.setUint8(1,5);const o=(new TextEncoder).encode(r.lyric).buffer,f=n(o.byteLength);return t([a,f,o])}if((e=>void 0!==e.midiPort)(r)){const t=e(4),n=t.arrayBuffer,i=t.dataView;return i.setUint8(0,255),i.setUint8(1,33),i.setUint8(2,1),i.setUint8(3,r.midiPort),n}if((e=>void 0!==e.noteOff)(r)){const t=e(3),n=t.arrayBuffer,i=t.dataView;return i.setUint8(0,128|15&r.channel),i.setUint8(1,r.noteOff.noteNumber),i.setUint8(2,r.noteOff.velocity),n}if((e=>void 0!==e.noteOn)(r)){const t=e(3),n=t.arrayBuffer,i=t.dataView;return i.setUint8(0,144|15&r.channel),i.setUint8(1,r.noteOn.noteNumber),i.setUint8(2,r.noteOn.velocity),n}if((e=>void 0!==e.pitchBend)(r)){const t=e(3),n=t.arrayBuffer,i=t.dataView;return i.setUint8(0,224|15&r.channel),i.setUint8(1,127&r.pitchBend),i.setUint8(2,r.pitchBend>>7),n}if((e=>void 0!==e.programChange)(r)){const t=e(2),n=t.arrayBuffer,i=t.dataView;return i.setUint8(0,192|15&r.channel),i.setUint8(1,r.programChange.programNumber),n}if((e=>void 0!==e.sequencerSpecificData)(r)){const i=e(2),a=i.arrayBuffer,s=i.dataView;s.setUint8(0,255),s.setUint8(1,127);const o=r.sequencerSpecificData.length/2,f=n(o),c=e(o),u=c.arrayBuffer,d=c.dataView;for(let e=0;e<r.sequencerSpecificData.length;e+=2)d.setUint8(e/2,parseInt(r.sequencerSpecificData.slice(e,e+2),16));return t([a,f,u])}if((e=>void 0!==e.setTempo)(r)){const t=e(6),n=t.arrayBuffer,i=t.dataView;return i.setUint8(0,255),i.setUint8(1,81),i.setUint8(2,3),i.setUint8(3,r.setTempo.microsecondsPerBeat>>16),i.setUint8(4,r.setTempo.microsecondsPerBeat>>8),i.setUint8(5,r.setTempo.microsecondsPerBeat),n}if((e=>void 0!==e.smpteOffset)(r)){const t=e(8),n=t.arrayBuffer,i=t.dataView;let a;if(24===r.smpteOffset.frameRate)a=0;else if(25===r.smpteOffset.frameRate)a=32;else if(29===r.smpteOffset.frameRate)a=64;else{if(30!==r.smpteOffset.frameRate)throw new Error;a=96}return i.setUint8(0,255),i.setUint8(1,84),i.setUint8(2,5),i.setUint8(3,r.smpteOffset.hour|a),i.setUint8(4,r.smpteOffset.minutes),i.setUint8(5,r.smpteOffset.seconds),i.setUint8(6,r.smpteOffset.frame),i.setUint8(7,r.smpteOffset.subFrame),n}if((e=>void 0!==e.sysex)(r)){const i=e(1),a=i.arrayBuffer;i.dataView.setUint8(0,240);const s=r.sysex.length/2,o=n(s),f=e(s),c=f.arrayBuffer,u=f.dataView;for(let e=0;e<r.sysex.length;e+=2)u.setUint8(e/2,parseInt(r.sysex.slice(e,e+2),16));return t([a,o,c])}if((e=>void 0!==e.timeSignature)(r)){const t=e(7),n=t.arrayBuffer,i=t.dataView;let a=r.timeSignature.denominator,s=0;for(;a>1;)a/=2,s+=1;return i.setUint8(0,255),i.setUint8(1,88),i.setUint8(2,4),i.setUint8(3,r.timeSignature.numerator),i.setUint8(4,s),i.setUint8(5,r.timeSignature.metronome),i.setUint8(6,r.timeSignature.thirtyseconds),n}if((e=>void 0!==e.text)(r)){const i=e(2),a=i.arrayBuffer,s=i.dataView;s.setUint8(0,255),s.setUint8(1,1);const o=(new TextEncoder).encode(r.text).buffer,f=n(o.byteLength);return t([a,f,o])}if((e=>void 0!==e.trackName)(r)){const i=e(2),a=i.arrayBuffer,s=i.dataView;s.setUint8(0,255),s.setUint8(1,3);const o=(new TextEncoder).encode(r.trackName).buffer,f=n(o.byteLength);return t([a,f,o])}throw new Error('Unencodable event with a delta of "'.concat(r.delta,'".'))})(i,e=>{const t=e.reduce((e,t)=>e+t.byteLength,0),n=e.reduce((e,t)=>{let n=s()(e,2),r=n[0],i=n[1];return i.set(new Uint8Array(t),r),[r+t.byteLength,i]},[0,new Uint8Array(t)]);return s()(n,2)[1].buffer},o),c=e=>{const t=e.reduce((e,t)=>e+t.byteLength,0);return e.reduce((e,t)=>{let n=e.offset,r=e.uint8Array;return r.set(new Uint8Array(t),n),{offset:n+t.byteLength,uint8Array:r}},{offset:0,uint8Array:new Uint8Array(t)}).uint8Array.buffer},u=e=>{const t=r(8),n=t.arrayBuffer,i=t.dataView,a=[n];let s=0;i.setUint32(0,1297379947);for(const t of e){const n=o(t.delta);try{const r=f(t);s+=n.byteLength+r.byteLength,a.push(n,r)}catch(n){if(n.message.match(/Unencodable\\smessage\\swith\\sa\\sdelta\\sof\\s[0-9]+\\./)){const n=e.indexOf(t);throw new Error("Unencodable message at index ".concat(n,"."))}throw n}}return i.setUint32(4,s),c(a)},d=e=>{let t=e.division,n=e.format,i=e.tracks;const a=[];try{a.push(((e,t,n)=>{const i=r(14),a=i.arrayBuffer,s=i.dataView;return s.setUint32(0,1297377380),s.setUint32(4,6),s.setUint16(8,t),s.setUint16(10,n.length),s.setUint16(12,e),a})(t,n,i))}catch(e){throw new Error("The given JSON object seems to be invalid.")}for(const e of i)try{a.push(u(e))}catch(t){if(t.message.match(/Unencodable\\sevent\\sat\\sposition\\s[0-9]+\\./)){const n=i.indexOf(e);throw new Error("".concat(t.message.slice(0,-1)," of the track at index ").concat(n,"."))}throw t}return c(a)};addEventListener("message",e=>{let t=e.data;try{if("encode"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));{const e=t.id,n=t.params.midiFile,r=d(n);postMessage({error:null,id:e,result:{arrayBuffer:r}},[r])}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}})}]);`;

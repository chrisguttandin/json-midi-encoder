// tslint:disable-next-line:max-line-length
export const worker = `!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);const n=e=>{const t=new ArrayBuffer(e);return{arrayBuffer:t,dataView:new DataView(t)}},i=e=>{const t=new ArrayBuffer(e);return{arrayBuffer:t,dataView:new DataView(t)}},a=e=>{const t=e.reduce((e,t)=>e+t.byteLength,0),[,r]=e.reduce((e,t)=>{let[r,n]=e;return n.set(new Uint8Array(t),r),[r+t.byteLength,n]},[0,new Uint8Array(t)]);return r.buffer},s=(e=>t=>{const r=Math.max(1,Math.floor(Math.log(t)/Math.log(2)/7)+1),{arrayBuffer:n,dataView:i}=e(r);for(let e=1;e<r;e+=1)i.setUint8(r-1-e,t>>7*e&127|128);return i.setUint8(r-1,127&t),n})(i),o=((e,t,r,n)=>i=>{if((e=>void 0!==e.channelPrefix)(i)){const{arrayBuffer:t,dataView:r}=e(4);return r.setUint8(0,255),r.setUint8(1,32),r.setUint8(2,1),r.setUint8(3,i.channelPrefix),t}if((e=>void 0!==e.channelPressure)(i)){const{arrayBuffer:t,dataView:r}=e(3);return r.setUint8(0,13|15&i.channel),r.setUint8(1,i.channelPressure.noteNumber),r.setUint8(2,i.channelPressure.pressure),t}if((e=>void 0!==e.controlChange)(i)){const{arrayBuffer:t,dataView:r}=e(3);return r.setUint8(0,176|15&i.channel),r.setUint8(1,i.controlChange.type),r.setUint8(2,i.controlChange.value),t}if((e=>void 0!==e.copyrightNotice)(i))return t(i,2,"copyrightNotice");if((e=>void 0!==e.deviceName)(i))return t(i,9,"deviceName");if((e=>void 0!==e.endOfTrack)(i)){const{arrayBuffer:t,dataView:r}=e(3);return r.setUint8(0,255),r.setUint8(1,47),r.setUint8(2,0),t}if((e=>void 0!==e.instrumentName)(i))return t(i,4,"instrumentName");if((e=>void 0!==e.keyPressure)(i)){const{arrayBuffer:t,dataView:r}=e(2);return r.setUint8(0,10|15&i.channel),r.setUint8(1,i.keyPressure.pressure),t}if((e=>void 0!==e.keySignature)(i)){const{arrayBuffer:t,dataView:r}=e(5);return r.setUint8(0,255),r.setUint8(1,89),r.setUint8(2,2),r.setUint8(3,i.keySignature.key),r.setUint8(4,i.keySignature.scale),t}if((e=>void 0!==e.lyric)(i))return t(i,5,"lyric");if((e=>void 0!==e.marker)(i))return t(i,6,"marker");if((e=>void 0!==e.midiPort)(i)){const{arrayBuffer:t,dataView:r}=e(4);return r.setUint8(0,255),r.setUint8(1,33),r.setUint8(2,1),r.setUint8(3,i.midiPort),t}if((e=>void 0!==e.noteOff)(i)){const{arrayBuffer:t,dataView:r}=e(3);return r.setUint8(0,128|15&i.channel),r.setUint8(1,i.noteOff.noteNumber),r.setUint8(2,i.noteOff.velocity),t}if((e=>void 0!==e.noteOn)(i)){const{arrayBuffer:t,dataView:r}=e(3);return r.setUint8(0,144|15&i.channel),r.setUint8(1,i.noteOn.noteNumber),r.setUint8(2,i.noteOn.velocity),t}if((e=>void 0!==e.pitchBend)(i)){const{arrayBuffer:t,dataView:r}=e(3);return r.setUint8(0,224|15&i.channel),r.setUint8(1,127&i.pitchBend),r.setUint8(2,i.pitchBend>>7),t}if((e=>void 0!==e.programChange)(i)){const{arrayBuffer:t,dataView:r}=e(2);return r.setUint8(0,192|15&i.channel),r.setUint8(1,i.programChange.programNumber),t}if((e=>void 0!==e.programName)(i))return t(i,8,"programName");if((e=>void 0!==e.sequencerSpecificData)(i)){const{arrayBuffer:t,dataView:a}=e(2);a.setUint8(0,255),a.setUint8(1,127);const s=i.sequencerSpecificData.length/2,o=n(s),{arrayBuffer:f,dataView:c}=e(s);for(let e=0;e<i.sequencerSpecificData.length;e+=2)c.setUint8(e/2,parseInt(i.sequencerSpecificData.slice(e,e+2),16));return r([t,o,f])}if((e=>void 0!==e.setTempo)(i)){const{arrayBuffer:t,dataView:r}=e(6);return r.setUint8(0,255),r.setUint8(1,81),r.setUint8(2,3),r.setUint8(3,i.setTempo.microsecondsPerBeat>>16),r.setUint8(4,i.setTempo.microsecondsPerBeat>>8),r.setUint8(5,i.setTempo.microsecondsPerBeat),t}if((e=>void 0!==e.smpteOffset)(i)){const{arrayBuffer:t,dataView:r}=e(8);let n;if(24===i.smpteOffset.frameRate)n=0;else if(25===i.smpteOffset.frameRate)n=32;else if(29===i.smpteOffset.frameRate)n=64;else{if(30!==i.smpteOffset.frameRate)throw new Error;n=96}return r.setUint8(0,255),r.setUint8(1,84),r.setUint8(2,5),r.setUint8(3,i.smpteOffset.hour|n),r.setUint8(4,i.smpteOffset.minutes),r.setUint8(5,i.smpteOffset.seconds),r.setUint8(6,i.smpteOffset.frame),r.setUint8(7,i.smpteOffset.subFrame),t}if((e=>void 0!==e.sysex)(i)){const{arrayBuffer:t,dataView:a}=e(1);a.setUint8(0,240);const s=i.sysex.length/2,o=n(s),{arrayBuffer:f,dataView:c}=e(s);for(let e=0;e<i.sysex.length;e+=2)c.setUint8(e/2,parseInt(i.sysex.slice(e,e+2),16));return r([t,o,f])}if((e=>void 0!==e.timeSignature)(i)){const{arrayBuffer:t,dataView:r}=e(7);let n=i.timeSignature.denominator,a=0;for(;n>1;)n/=2,a+=1;return r.setUint8(0,255),r.setUint8(1,88),r.setUint8(2,4),r.setUint8(3,i.timeSignature.numerator),r.setUint8(4,a),r.setUint8(5,i.timeSignature.metronome),r.setUint8(6,i.timeSignature.thirtyseconds),t}if((e=>void 0!==e.metaTypeByte)(i))return t(i,parseInt(i.metaTypeByte,16),"text");if((e=>void 0!==e.text&&void 0===e.metaTypeByte)(i))return t(i,1,"text");if((e=>void 0!==e.trackName)(i))return t(i,3,"trackName");throw new Error('Unencodable event with a delta of "'.concat(i.delta,'".'))})(i,((e,t,r)=>(n,i,a)=>{const{arrayBuffer:s,dataView:o}=e(2);o.setUint8(0,255),o.setUint8(1,i);const f=(new TextEncoder).encode(n[a]).buffer,c=r(f.byteLength);return t([s,c,f])})(i,a,s),a,s),f=e=>{const t=e.reduce((e,t)=>e+t.byteLength,0),{uint8Array:r}=e.reduce((e,t)=>{let{offset:r,uint8Array:n}=e;return n.set(new Uint8Array(t),r),{offset:r+t.byteLength,uint8Array:n}},{offset:0,uint8Array:new Uint8Array(t)});return r.buffer},c=e=>{const{arrayBuffer:t,dataView:r}=n(8),i=[t];let a=0;r.setUint32(0,1297379947);for(const t of e){const r=s(t.delta);try{const n=o(t);a+=r.byteLength+n.byteLength,i.push(r,n)}catch(r){if(r.message.match(/Unencodable\\smessage\\swith\\sa\\sdelta\\sof\\s[0-9]+\\./)){const r=e.indexOf(t);throw new Error("Unencodable message at index ".concat(r,"."))}throw r}}return r.setUint32(4,a),f(i)},u=e=>{let{division:t,format:r,tracks:i}=e;const a=[];try{a.push(((e,t,r)=>{const{arrayBuffer:i,dataView:a}=n(14);return a.setUint32(0,1297377380),a.setUint32(4,6),a.setUint16(8,t),a.setUint16(10,r.length),a.setUint16(12,e),i})(t,r,i))}catch(e){throw new Error("The given JSON object seems to be invalid.")}for(const e of i)try{a.push(c(e))}catch(t){if(t.message.match(/Unencodable\\sevent\\sat\\sposition\\s[0-9]+\\./)){const r=i.indexOf(e);throw new Error("".concat(t.message.slice(0,-1)," of the track at index ").concat(r,"."))}throw t}return f(a)};addEventListener("message",e=>{let{data:t}=e;try{if("encode"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));{const{id:e,params:{midiFile:r}}=t,n=u(r);postMessage({error:null,id:e,result:{arrayBuffer:n}},[n])}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}})}]);`;

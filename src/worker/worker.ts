// tslint:disable-next-line:max-line-length
export const worker = `!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);const n=e=>{const t=new ArrayBuffer(e);return{arrayBuffer:t,dataView:new DataView(t)}};var i=function(e){var t=new ArrayBuffer(e);return{arrayBuffer:t,dataView:new DataView(t)}},a=function(e){var t=e.reduce(function(e,t){return e+t.byteLength},0);return e.reduce(function(e,t){var r=e[0],n=e[1];return n.set(new Uint8Array(t),r),[r+t.byteLength,n]},[0,new Uint8Array(t)])[1].buffer},s=function(e){for(var t=Math.max(1,Math.floor(Math.log(e)/Math.log(2)/7)+1),r=i(t),n=r.arrayBuffer,a=r.dataView,s=t-1,o=e,f=0;f<s;f+=1)a.setUint8(f,o>>7|128),o&=127;return a.setUint8(t-1,o),n},o=function(e){if(function(e){return void 0!==e.channelPrefix}(e)){var t=i(4),r=t.arrayBuffer;return(g=t.dataView).setUint8(0,255),g.setUint8(1,32),g.setUint8(2,1),g.setUint8(3,e.channelPrefix),r}if(function(e){return void 0!==e.controlChange}(e)){var n=i(3);r=n.arrayBuffer;return(g=n.dataView).setUint8(0,176|15&e.channel),g.setUint8(1,e.controlChange.type),g.setUint8(2,e.controlChange.value),r}if(function(e){return void 0!==e.endOfTrack}(e)){var o=i(3);r=o.arrayBuffer;return(g=o.dataView).setUint8(0,255),g.setUint8(1,47),g.setUint8(2,0),r}if(function(e){return void 0!==e.keySignature}(e)){var f=i(5);r=f.arrayBuffer;return(g=f.dataView).setUint8(0,255),g.setUint8(1,89),g.setUint8(2,2),g.setUint8(3,e.keySignature.key),g.setUint8(4,e.keySignature.scale),r}if(function(e){return void 0!==e.lyric}(e)){var u=i(2);r=u.arrayBuffer;(g=u.dataView).setUint8(0,255),g.setUint8(1,5);var c=(new TextEncoder).encode(e.lyric).buffer,d=s(c.byteLength);return a([r,d,c])}if(function(e){return void 0!==e.midiPort}(e)){var U=i(4);r=U.arrayBuffer;return(g=U.dataView).setUint8(0,255),g.setUint8(1,33),g.setUint8(2,1),g.setUint8(3,e.midiPort),r}if(function(e){return void 0!==e.noteOff}(e)){var l=i(3);r=l.arrayBuffer;return(g=l.dataView).setUint8(0,128|15&e.channel),g.setUint8(1,e.noteOff.noteNumber),g.setUint8(2,e.noteOff.velocity),r}if(function(e){return void 0!==e.noteOn}(e)){var y=i(3);r=y.arrayBuffer;return(g=y.dataView).setUint8(0,144|15&e.channel),g.setUint8(1,e.noteOn.noteNumber),g.setUint8(2,e.noteOn.velocity),r}if(function(e){return void 0!==e.pitchBend}(e)){var m=i(3);r=m.arrayBuffer;return(g=m.dataView).setUint8(0,224|15&e.channel),g.setUint8(1,127&e.pitchBend),g.setUint8(2,e.pitchBend>>7),r}if(function(e){return void 0!==e.programChange}(e)){var h=i(2);r=h.arrayBuffer;return(g=h.dataView).setUint8(0,192|15&e.channel),g.setUint8(1,e.programChange.programNumber),r}if(function(e){return void 0!==e.setTempo}(e)){var v=i(6);r=v.arrayBuffer;return(g=v.dataView).setUint8(0,255),g.setUint8(1,81),g.setUint8(2,3),g.setUint8(3,e.setTempo.microsecondsPerBeat>>16),g.setUint8(4,e.setTempo.microsecondsPerBeat>>8),g.setUint8(5,e.setTempo.microsecondsPerBeat),r}if(function(e){return void 0!==e.smpteOffset}(e)){var w=i(8),g=(r=w.arrayBuffer,w.dataView),p=void 0;if(24===e.smpteOffset.frameRate)p=0;else if(25===e.smpteOffset.frameRate)p=32;else if(29===e.smpteOffset.frameRate)p=64;else{if(30!==e.smpteOffset.frameRate)throw new Error;p=96}return g.setUint8(0,255),g.setUint8(1,84),g.setUint8(2,5),g.setUint8(3,e.smpteOffset.hour|p),g.setUint8(4,e.smpteOffset.minutes),g.setUint8(5,e.smpteOffset.seconds),g.setUint8(6,e.smpteOffset.frame),g.setUint8(7,e.smpteOffset.subFrame),r}if(function(e){return void 0!==e.sysex}(e)){var b=i(1);r=b.arrayBuffer;(g=b.dataView).setUint8(0,240);for(var B=e.sysex.length/2,O=s(B),V=i(B),x=V.arrayBuffer,M=V.dataView,S=0;S<e.sysex.length;S+=2)M.setUint8(S/2,parseInt(e.sysex.slice(S,S+2),16));return a([r,O,x])}if(function(e){return void 0!==e.timeSignature}(e)){for(var P=i(7),T=(r=P.arrayBuffer,g=P.dataView,e.timeSignature.denominator),A=0;T>1;)T/=2,A+=1;return g.setUint8(0,255),g.setUint8(1,88),g.setUint8(2,4),g.setUint8(3,e.timeSignature.numerator),g.setUint8(4,A),g.setUint8(5,e.timeSignature.metronome),g.setUint8(6,e.timeSignature.thirtyseconds),r}if(function(e){return void 0!==e.text}(e)){var E=i(2);r=E.arrayBuffer;(g=E.dataView).setUint8(0,255),g.setUint8(1,1);c=(new TextEncoder).encode(e.text).buffer,d=s(c.byteLength);return a([r,d,c])}if(function(e){return void 0!==e.trackName}(e)){var L=i(2);r=L.arrayBuffer;(g=L.dataView).setUint8(0,255),g.setUint8(1,3);c=(new TextEncoder).encode(e.trackName).buffer,d=s(c.byteLength);return a([r,d,c])}throw new Error('Unencodable event with a delta of "'+e.delta+'".')};const f=e=>{const t=e.reduce((e,t)=>e+t.byteLength,0);return e.reduce(({offset:e,uint8Array:t},r)=>(t.set(new Uint8Array(r),e),{offset:e+r.byteLength,uint8Array:t}),{offset:0,uint8Array:new Uint8Array(t)}).uint8Array.buffer},u=e=>{const t=Math.max(1,Math.floor(Math.log(e)/Math.log(2)/7)+1),r=n(t),i=r.arrayBuffer,a=r.dataView,s=t-1;let o=e;for(let e=0;e<s;e+=1)a.setUint8(e,o>>7|128),o&=127;return a.setUint8(t-1,o),i},c=e=>{const t=n(8),r=t.arrayBuffer,i=t.dataView,a=[r];let s=0;i.setUint32(0,1297379947);for(const t of e){const r=u(t.delta);try{const n=o(t);s+=r.byteLength+n.byteLength,a.push(r,n)}catch(r){if(r.message.match(/Unencodable\\smessage\\swith\\sa\\sdelta\\sof\\s[0-9]+\\./)){const r=e.indexOf(t);throw new Error("Unencodable message at index ".concat(r,"."))}throw r}}return i.setUint32(4,s),f(a)},d=({division:e,format:t,tracks:r})=>{const i=[];try{i.push(((e,t,r)=>{const i=n(14),a=i.arrayBuffer,s=i.dataView;return s.setUint32(0,1297377380),s.setUint32(4,6),s.setUint16(8,t),s.setUint16(10,r.length),s.setUint16(12,e),a})(e,t,r))}catch(e){throw new Error("The given JSON object seems to be invalid.")}for(const e of r)try{i.push(c(e))}catch(t){if(t.message.match(/Unencodable\\sevent\\sat\\sposition\\s[0-9]+\\./)){const n=r.indexOf(e);throw new Error("".concat(t.message.slice(0,-1)," of the track at index ").concat(n,"."))}throw t}return f(i)};addEventListener("message",({data:e})=>{try{if("encode"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const t=e.id,r=e.params.midiFile,n=d(r);postMessage({error:null,id:t,result:{arrayBuffer:n}},[n])}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`;
